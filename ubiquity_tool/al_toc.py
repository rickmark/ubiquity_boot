import io
import struct
import enum

AL_BOOT_TOC_MAGIC = 0x070C070C
AL_BOOT_TOC_CIGAM = 0x0C070C07

AL_BOOT_TOC_SKIP = 0x00002000
AL_BOOT_TOC_NUM_SKIP = 16

AL_FLASH_OBJ_ID_USER_DEFINED_START = 0x1000
AL_FLASH_OBJ_ID_USER_DEFINED_END = 0x1fff


class AlpineTocObjectType(enum.Enum):
    AL_FLASH_OBJ_ID_BOOT_MODE = 0x0000
    AL_FLASH_OBJ_ID_STG2 = 0x0001
    AL_FLASH_OBJ_ID_DT = 0x0002
    AL_FLASH_OBJ_ID_STG2_5 = 0x0003
    AL_FLASH_OBJ_ID_STG3 = 0x0004
    AL_FLASH_OBJ_ID_UBOOT = 0x0005
    AL_FLASH_OBJ_ID_UBOOT_SCRIPT = 0x0006
    AL_FLASH_OBJ_ID_UBOOT_ENV = 0x0007
    AL_FLASH_OBJ_ID_UBOOT_ENV_RED = 0x0008
    AL_FLASH_OBJ_ID_KERNEL = 0x0009
    AL_FLASH_OBJ_ID_ROOT_FS = 0x000A
    AL_FLASH_OBJ_ID_2ND_TOC = 0x000B
    AL_FLASH_OBJ_ID_PRE_BOOT = 0x000C
    AL_FLASH_OBJ_ID_APCEA = 0x0100
    AL_FLASH_OBJ_ID_APCEA_CFG = 0x0101
    AL_FLASH_OBJ_ID_IPXE = 0x0110
    AL_FLASH_OBJ_ID_BOOT_APP = 0x0200
    AL_FLASH_OBJ_ID_BOOT_APP_CFG = 0x0201
    AL_FLASH_OBJ_ID_APP_0 = 0x0210
    AL_FLASH_OBJ_ID_APP_0_CFG = 0x0211
    AL_FLASH_OBJ_ID_APP_1 = 0x0220
    AL_FLASH_OBJ_ID_APP_1_CFG = 0x0221
    AL_FLASH_OBJ_ID_APP_2 = 0x0230
    AL_FLASH_OBJ_ID_APP_2_CFG = 0x0231
    AL_FLASH_OBJ_ID_APP_3 = 0x0240
    AL_FLASH_OBJ_ID_APP_3_CFG = 0x0241
    AL_FLASH_OBJ_ID_CRASH_DUMP = 0x0300


class AlpineTocEntry:
    pass


class AlpineToc:
    AL_FLASH_TOC_HEADER_FORMAT = b'IIIII'
    AL_FLASH_TOC_ENTRY_FORMAT = b'I8sIIIII'
    AL_FLASH_TOC_FOOTER_FORMAT = b'I'

    pass


class AlpineFlashObject:
    pass


class AlpineBootFile:
    def __init__(self, stream):
        self.stream = stream
